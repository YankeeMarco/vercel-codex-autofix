Here is the complete README.md, formatted exactly as a Markdown file.
You can copy & paste directly into README.md with perfect GitHub rendering.

â¸»


# ğŸ“¦ vercel-codex-autofix

An **autonomous self-healing deployment loop** for Vercel projects.

`vercel-codex-autofix` continuously:

1. Fetches the latest Vercel deployment logs  
2. Feeds those logs into a local LLM/Codex agent  
3. Applies any fixes generated by the model  
4. Commits and pushes the updated code  
5. Triggers a fresh Vercel deployment  
6. Repeats until the deployment succeeds  

This creates a *closed-loop, fully automated AI build system* that monitors your Vercel deployments, diagnoses problems from logs, fixes the codebase, and redeploysâ€”unattended.

Ideal for:

- AI-assisted CI/CD  
- Self-repairing deployments  
- Autonomous debugging pipelines  
- Zero-touch monitoring  
- Large monorepo automation  

---

## ğŸš€ Features

- Automatic deployment log retrieval (`vercel inspect --logs --wait`)
- Local Codex/LLM integration via stdin
- Automated git add â†’ commit â†’ push  
- Auto-trigger new Vercel deployments
- Customizable success/failure detection
- Maximum-iteration safety
- Pure Python implementation â€” no servers needed

---

## ğŸ§  Architecture Overview

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vercel Build  â”‚       â”‚ Codex / LLM Agent â”‚
â”‚  (deployment)  â”‚       â”‚   (local CLI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â–¼                            â”‚
 [1] Fetch logs                      â”‚
        â”‚                            â”‚
        â–¼                            â”‚
 [2] Send logs to Codex              â”‚
        â”‚                            â–¼
        â”‚                   [3] Codex fixes code
        â”‚                            â”‚
        â–¼                            â”‚
 [4] Git commit & push  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
 [5] New Vercel build triggered
        â”‚
        â–¼
 [6] Loop until success


â¸»

ğŸ“¦ Installation

Clone the repository:

git clone https://github.com/yankeemarco/vercel-codex-autofix.git
cd vercel-codex-autofix

Install dependencies:

pip install -r requirements.txt

Required tools:
	â€¢	Python â‰¥ 3.9
	â€¢	Vercel CLI
	â€¢	Git
	â€¢	Local Codex/LLM agent

â¸»

âš™ï¸ Configuration

Configure environment variables using a .env file (see example below).

Key values:

REPO_PATH = "/absolute/path/to/project"
PROD_URL = "https://your-project.vercel.app"

GIT_REMOTE = "origin"
GIT_BRANCH = "main"

CODEX_CMD = ["codex", "fix-from-logs"]

Replace CODEX_CMD with your actual local LLM command:

CODEX_CMD = ["python", "-m", "codex_agent", "repair"]
# or:
CODEX_CMD = ["/usr/local/bin/codex", "--mode", "autofix"]


â¸»

ğŸ” Authentication: Setting Up Vercel Tokens

To allow vercel-codex-autofix to fetch logs non-interactively, you must configure:
	â€¢	VERCEL_TOKEN â€” Personal Access Token
	â€¢	VERCEL_TEAM_ID (optional) â€” required for team deployments

These belong in your .env.

â¸»

â­ 1. Getting VERCEL_TOKEN (Personal Access Token)
	1.	Open
ğŸ‘‰ https://vercel.com/account/tokens
	2.	Click Create Token
	3.	Name it (vercel-codex-autofix)
	4.	Select expiration (e.g., No expiration)
	5.	Click Create
	6.	Copy it immediately â€” Vercel will not show it again

Example:

vcpat_ABCD1234efgh5678ijkl9012mnop3456

Add to .env:

VERCEL_TOKEN=vcpat_ABCD1234efgh5678ijkl9012mnop3456


â¸»

â­ 2. Getting VERCEL_TEAM_ID (Optional)

Only needed if deploying under a Team workspace.

Find it via UI:
	1.	Open
ğŸ‘‰ https://vercel.com/account/teams
	2.	Click your team
	3.	Check the URL:

https://vercel.com/teams/<team-id>/settings

Example:

https://vercel.com/teams/team_abcd1234xyz/settings

Add to .env:

VERCEL_TEAM_ID=team_abcd1234xyz

Or via CLI:

vercel teams ls

Output:

ID                NAME
team_abcd1234xyz  zeda-team
personal          yourname

If using your personal account:

VERCEL_TEAM_ID=


â¸»

ğŸ“ Example .env

# --- Vercel Authentication ---
VERCEL_TOKEN=vcpat_your_token_here
VERCEL_TEAM_ID=

# --- Repo Configuration ---
REPO_PATH=/absolute/path/to/your/project
GIT_REMOTE=origin
GIT_BRANCH=main

# --- Deployment Configuration ---
PROD_URL=https://your-project.vercel.app

# --- Codex / LLM Backend ---
CODEX_CMD=codex fix-from-logs

# --- Loop Settings ---
MAX_ITERATIONS=10
SLEEP_AFTER_PUSH_SECONDS=90


â¸»

â–¶ï¸ Usage

Run the loop:

python vercel_codex_loop.py

The script will:
	â€¢	Fetch logs
	â€¢	Send logs to Codex
	â€¢	Apply model-generated fixes
	â€¢	Commit and push
	â€¢	Trigger Vercel deployment
	â€¢	Repeat until successful

Stops when:
	â€¢	Build succeeds
	â€¢	Codex outputs NO_CHANGES
	â€¢	MAX_ITERATIONS reached

â¸»

ğŸ§ª Example Runtime Output

[start] Vercel â†” Codex auto-fix loop
Iteration 1/10
[step] Fetching Vercel build logs...
[info] Build failed: Next.js compile error.

[step] Running Codex with latest build logs...
[info] Codex applied changes.

[step] Git add/commit/push...
[info] Commit created.
[info] git push completed.

[info] Waiting 90s while Vercel builds...


â¸»

ğŸ”§ Customization

You may configure:
	â€¢	Log success/failure heuristics
	â€¢	Codex output parsing
	â€¢	Commit message styles
	â€¢	Loop timing
	â€¢	Auto-stop rules

â¸»

ğŸŒ Roadmap
	â€¢	GitHub Actions integration
	â€¢	Optional PR-mode (instead of direct commit)
	â€¢	Multi-agent repair (Codex + Claude + Gemini)
	â€¢	Native Vercel API support
	â€¢	Build-log diffing
	â€¢	Error-type-based healing strategies

â¸»

ğŸ¤ Contributing

Pull requests and issues are welcome.
Feel free to extend heuristics or add new AI repair agents.

â¸»

ğŸ“„ License

MIT License.

---

If you want:

âœ… Automatic generation of a `README_badges` section  
âœ… A polished project structure scaffold  
âœ… A fully updated Python script with `.env` support  

Just tell me **â€œGenerate full repo structureâ€** or **â€œGenerate Python scriptâ€**.